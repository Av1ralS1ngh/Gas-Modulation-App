import React, { useState, useContext } from "react";
import { ethers } from "ethers";
import { WalletContext } from "../context/WalletContext";

const contractAddress = "YOUR_LIQUIDITY_POOL_CONTRACT_ADDRESS";
const abi = [
  // ABI details for LiquidityPool contract
  {"abi":[{"type":"constructor","inputs":[{"name":"_thresholdAddress","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"receive","stateMutability":"payable"},{"type":"function","name":"chargeExtraGasForLargeTx","inputs":[{"name":"to","type":"address","internalType":"address payable"},{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"payable"},{"type":"function","name":"depositLiquidity","inputs":[],"outputs":[],"stateMutability":"payable"},{"type":"function","name":"liquidityPool","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"payGasForSmallTx","inputs":[{"name":"to","type":"address","internalType":"address payable"},{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"payable"},{"type":"function","name":"renounceOwnership","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"thresholdContract","inputs":[],"outputs":[{"name":"","type":"address","internalType":"contract DynamicThreshold"}],"stateMutability":"view"},{"type":"function","name":"transferOwnership","inputs":[{"name":"newOwner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"updateThreshold","inputs":[{"name":"newThreshold","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"withdrawFunds","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"GasPaid","inputs":[{"name":"user","type":"address","indexed":true,"internalType":"address"},{"name":"gasUsed","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"isSmallTx","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false},{"type":"event","name":"OwnershipTransferred","inputs":[{"name":"previousOwner","type":"address","indexed":true,"internalType":"address"},{"name":"newOwner","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"error","name":"OwnableInvalidOwner","inputs":[{"name":"owner","type":"address","internalType":"address"}]},{"type":"error","name":"OwnableUnauthorizedAccount","inputs":[{"name":"account","type":"address","internalType":"address"}]}],"bytecode":{"object":"0x60806040819052600154631cea46b760e31b82526001600160a01b03169063e75235b890608490602090600481865afa158015610040573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906100649190610143565b60035534801561007357600080fd5b50604051610bb6380380610bb68339810160408190526100929161015c565b33806100b857604051631e4fbdf760e01b81526000600482015260240160405180910390fd5b6100c1816100f3565b50600180546001600160a01b0319166001600160a01b0392909216919091179055670de0b6b3a764000060025561018c565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b60006020828403121561015557600080fd5b5051919050565b60006020828403121561016e57600080fd5b81516001600160a01b038116811461018557600080fd5b9392505050565b610a1b8061019b6000396000f3fe6080604052600436106100955760003560e01c80638da5cb5b116100595780638da5cb5b1461014c578063972c78b51461016a578063ca593c591461017d578063d7d7442f14610185578063f2fde38b146101a557600080fd5b8063155dd5ee146100a15780632653d97d146100c357806365fcf53a146100d6578063665a11ca14610113578063715018a61461013757600080fd5b3661009c57005b600080fd5b3480156100ad57600080fd5b506100c16100bc366004610871565b6101c5565b005b6100c16100d136600461089f565b6103b1565b3480156100e257600080fd5b506001546100f6906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b34801561011f57600080fd5b5061012960025481565b60405190815260200161010a565b34801561014357600080fd5b506100c1610512565b34801561015857600080fd5b506000546001600160a01b03166100f6565b6100c161017836600461089f565b610526565b6100c16106e3565b34801561019157600080fd5b506100c16101a0366004610871565b6106fc565b3480156101b157600080fd5b506100c16101c03660046108cb565b610709565b6101cd610747565b61020c6040518060400160405280601c81526020017f57697468647261772063616c6c6564207769746820616d6f756e743a0000000081525082610774565b61024d6040518060400160405280601781526020017f43757272656e74206c697175696469747920706f6f6c3a000000000000000000815250600254610774565b6102806040518060400160405280601181526020017021b7b73a3930b1ba103130b630b731b29d60791b81525047610774565b6002548111156102ce5760405162461bcd60e51b81526020600482015260146024820152734e6f7420656e6f756768206c697175696469747960601b60448201526064015b60405180910390fd5b80600260008282546102e09190610905565b9091555050600080546040516001600160a01b039091169083908381818185875af1925050503d8060008114610332576040519150601f19603f3d011682016040523d82523d6000602084013e610337565b606091505b505090508061037a5760405162461bcd60e51b815260206004820152600f60248201526e151c985b9cd9995c8819985a5b1959608a1b60448201526064016102c5565b6103ad60405180604001604052806012815260200171151c985b9cd9995c8818dbdb5c1b195d195960721b8152506107b9565b5050565b600354341161040d5760405162461bcd60e51b815260206004820152602260248201527f5472616e73616374696f6e2069732062656c6f7720676173207468726573686f6044820152611b1960f21b60648201526084016102c5565b6000606461041c34600161091e565b6104269190610935565b905060006104348234610905565b905060005a610443903a61091e565b905060006104518383610957565b905080600260008282546104659190610957565b9091555050604080518281526000602082015233917f2b4e4f91e36a6402df962d17d8dc7c0ca8fd22111f05f7d123c7c7d017d3df16910160405180910390a26040516001600160a01b0387169086156108fc029087906000818181858888f193505050501580156104db573d6000803e3d6000fd5b50604051309084156108fc029085906000818181858888f19350505050158015610509573d6000803e3d6000fd5b50505050505050565b61051a610747565b61052460006107fc565b565b6000600254116105715760405162461bcd60e51b81526020600482015260166024820152754e6f206c697175696469747920617661696c61626c6560501b60448201526064016102c5565b6003543411156105cd5760405162461bcd60e51b815260206004820152602160248201527f5472616e73616374696f6e206578636565647320676173207468726573686f6c6044820152601960fa1b60648201526084016102c5565b60005a6105da903a61091e565b90508060025410156106275760405162461bcd60e51b8152602060048201526016602482015275496e73756666696369656e74206c697175696469747960501b60448201526064016102c5565b80600260008282546106399190610905565b9091555050604080518281526001602082015233917f2b4e4f91e36a6402df962d17d8dc7c0ca8fd22111f05f7d123c7c7d017d3df16910160405180910390a2604051339082156108fc029083906000818181858888f193505050501580156106a6573d6000803e3d6000fd5b506040516001600160a01b0384169083156108fc029084906000818181858888f193505050501580156106dd573d6000803e3d6000fd5b50505050565b34600260008282546106f59190610957565b9091555050565b610704610747565b600355565b610711610747565b6001600160a01b03811661073b57604051631e4fbdf760e01b8152600060048201526024016102c5565b610744816107fc565b50565b6000546001600160a01b031633146105245760405163118cdaa760e01b81523360048201526024016102c5565b6103ad828260405160240161078a9291906109b0565b60408051601f198184030181529190526020810180516001600160e01b0316632d839cb360e21b17905261084c565b610744816040516024016107cd91906109d2565b60408051601f198184030181529190526020810180516001600160e01b031663104c13eb60e21b17905261084c565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6107448160006a636f6e736f6c652e6c6f679050600080835160208501845afa505050565b60006020828403121561088357600080fd5b5035919050565b6001600160a01b038116811461074457600080fd5b600080604083850312156108b257600080fd5b82356108bd8161088a565b946020939093013593505050565b6000602082840312156108dd57600080fd5b81356108e88161088a565b9392505050565b634e487b7160e01b600052601160045260246000fd5b81810381811115610918576109186108ef565b92915050565b8082028115828204841417610918576109186108ef565b60008261095257634e487b7160e01b600052601260045260246000fd5b500490565b80820180821115610918576109186108ef565b6000815180845260005b8181101561099057602081850181015186830182015201610974565b506000602082860101526020601f19601f83011685010191505092915050565b6040815260006109c3604083018561096a565b90508260208301529392505050565b6020815260006108e8602083018461096a56fea26469706673582212201d5a932b326e351617423f2bd4b8396bee9fb97d3cea9a176902cc4e9b7b322664736f6c634300081c0033","sourceMap":"151:2874:22:-:0;;;;;676:17;;-1:-1:-1;;;676:32:22;;-1:-1:-1;;;;;676:17:22;;:30;;:32;;;;;151:2874;676:17;:32;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;656:52;;369:175;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;186:10;;1340:95:23;;1393:31;;-1:-1:-1;;;1393:31:23;;1421:1;1393:31;;;644:51:24;617:18;;1393:31:23;;;;;;;1340:95;1444:32;1463:12;1444:18;:32::i;:::-;-1:-1:-1;418:17:22;:55;;-1:-1:-1;;;;;;418:55:22;-1:-1:-1;;;;;418:55:22;;;;;;;;;;530:7;514:13;:23;151:2874;;2983:187:23;3056:16;3075:6;;-1:-1:-1;;;;;3091:17:23;;;-1:-1:-1;;;;;;3091:17:23;;;;;;3123:40;;3075:6;;;;;;;3123:40;;3056:16;3123:40;3046:124;2983:187;:::o;14:184:24:-;84:6;137:2;125:9;116:7;112:23;108:32;105:52;;;153:1;150;143:12;105:52;-1:-1:-1;176:16:24;;14:184;-1:-1:-1;14:184:24:o;203:290::-;273:6;326:2;314:9;305:7;301:23;297:32;294:52;;;342:1;339;332:12;294:52;368:16;;-1:-1:-1;;;;;413:31:24;;403:42;;393:70;;459:1;456;449:12;393:70;482:5;203:290;-1:-1:-1;;;203:290:24:o;498:203::-;151:2874:22;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x6080604052600436106100955760003560e01c80638da5cb5b116100595780638da5cb5b1461014c578063972c78b51461016a578063ca593c591461017d578063d7d7442f14610185578063f2fde38b146101a557600080fd5b8063155dd5ee146100a15780632653d97d146100c357806365fcf53a146100d6578063665a11ca14610113578063715018a61461013757600080fd5b3661009c57005b600080fd5b3480156100ad57600080fd5b506100c16100bc366004610871565b6101c5565b005b6100c16100d136600461089f565b6103b1565b3480156100e257600080fd5b506001546100f6906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b34801561011f57600080fd5b5061012960025481565b60405190815260200161010a565b34801561014357600080fd5b506100c1610512565b34801561015857600080fd5b506000546001600160a01b03166100f6565b6100c161017836600461089f565b610526565b6100c16106e3565b34801561019157600080fd5b506100c16101a0366004610871565b6106fc565b3480156101b157600080fd5b506100c16101c03660046108cb565b610709565b6101cd610747565b61020c6040518060400160405280601c81526020017f57697468647261772063616c6c6564207769746820616d6f756e743a0000000081525082610774565b61024d6040518060400160405280601781526020017f43757272656e74206c697175696469747920706f6f6c3a000000000000000000815250600254610774565b6102806040518060400160405280601181526020017021b7b73a3930b1ba103130b630b731b29d60791b81525047610774565b6002548111156102ce5760405162461bcd60e51b81526020600482015260146024820152734e6f7420656e6f756768206c697175696469747960601b60448201526064015b60405180910390fd5b80600260008282546102e09190610905565b9091555050600080546040516001600160a01b039091169083908381818185875af1925050503d8060008114610332576040519150601f19603f3d011682016040523d82523d6000602084013e610337565b606091505b505090508061037a5760405162461bcd60e51b815260206004820152600f60248201526e151c985b9cd9995c8819985a5b1959608a1b60448201526064016102c5565b6103ad60405180604001604052806012815260200171151c985b9cd9995c8818dbdb5c1b195d195960721b8152506107b9565b5050565b600354341161040d5760405162461bcd60e51b815260206004820152602260248201527f5472616e73616374696f6e2069732062656c6f7720676173207468726573686f6044820152611b1960f21b60648201526084016102c5565b6000606461041c34600161091e565b6104269190610935565b905060006104348234610905565b905060005a610443903a61091e565b905060006104518383610957565b905080600260008282546104659190610957565b9091555050604080518281526000602082015233917f2b4e4f91e36a6402df962d17d8dc7c0ca8fd22111f05f7d123c7c7d017d3df16910160405180910390a26040516001600160a01b0387169086156108fc029087906000818181858888f193505050501580156104db573d6000803e3d6000fd5b50604051309084156108fc029085906000818181858888f19350505050158015610509573d6000803e3d6000fd5b50505050505050565b61051a610747565b61052460006107fc565b565b6000600254116105715760405162461bcd60e51b81526020600482015260166024820152754e6f206c697175696469747920617661696c61626c6560501b60448201526064016102c5565b6003543411156105cd5760405162461bcd60e51b815260206004820152602160248201527f5472616e73616374696f6e206578636565647320676173207468726573686f6c6044820152601960fa1b60648201526084016102c5565b60005a6105da903a61091e565b90508060025410156106275760405162461bcd60e51b8152602060048201526016602482015275496e73756666696369656e74206c697175696469747960501b60448201526064016102c5565b80600260008282546106399190610905565b9091555050604080518281526001602082015233917f2b4e4f91e36a6402df962d17d8dc7c0ca8fd22111f05f7d123c7c7d017d3df16910160405180910390a2604051339082156108fc029083906000818181858888f193505050501580156106a6573d6000803e3d6000fd5b506040516001600160a01b0384169083156108fc029084906000818181858888f193505050501580156106dd573d6000803e3d6000fd5b50505050565b34600260008282546106f59190610957565b9091555050565b610704610747565b600355565b610711610747565b6001600160a01b03811661073b57604051631e4fbdf760e01b8152600060048201526024016102c5565b610744816107fc565b50565b6000546001600160a01b031633146105245760405163118cdaa760e01b81523360048201526024016102c5565b6103ad828260405160240161078a9291906109b0565b60408051601f198184030181529190526020810180516001600160e01b0316632d839cb360e21b17905261084c565b610744816040516024016107cd91906109d2565b60408051601f198184030181529190526020810180516001600160e01b031663104c13eb60e21b17905261084c565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6107448160006a636f6e736f6c652e6c6f679050600080835160208501845afa505050565b60006020828403121561088357600080fd5b5035919050565b6001600160a01b038116811461074457600080fd5b600080604083850312156108b257600080fd5b82356108bd8161088a565b946020939093013593505050565b6000602082840312156108dd57600080fd5b81356108e88161088a565b9392505050565b634e487b7160e01b600052601160045260246000fd5b81810381811115610918576109186108ef565b92915050565b8082028115828204841417610918576109186108ef565b60008261095257634e487b7160e01b600052601260045260246000fd5b500490565b80820180821115610918576109186108ef565b6000815180845260005b8181101561099057602081850181015186830182015201610974565b506000602082860101526020601f19601f83011685010191505092915050565b6040815260006109c3604083018561096a565b90508260208301529392505050565b6020815260006108e8602083018461096a56fea26469706673582212201d5a932b326e351617423f2bd4b8396bee9fb97d3cea9a176902cc4e9b7b322664736f6c634300081c0033","sourceMap":"151:2874:22:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2480:509;;;;;;;;;;-1:-1:-1;2480:509:22;;;;;:::i;:::-;;:::i;:::-;;1490:637;;;;;;:::i;:::-;;:::i;204:41::-;;;;;;;;;;-1:-1:-1;204:41:22;;;;-1:-1:-1;;;;;204:41:22;;;;;;-1:-1:-1;;;;;967:32:24;;;949:51;;937:2;922:18;204:41:22;;;;;;;;305:28;;;;;;;;;;;;;;;;;;;1157:25:24;;;1145:2;1130:18;305:28:22;1011:177:24;2364:101:23;;;;;;;;;;;;;:::i;1709:85::-;;;;;;;;;;-1:-1:-1;1755:7:23;1781:6;-1:-1:-1;;;;;1781:6:23;1709:85;;924:513:22;;;;;;:::i;:::-;;:::i;2351:88::-;;;:::i;2196:107::-;;;;;;;;;;-1:-1:-1;2196:107:22;;;;;:::i;:::-;;:::i;2614:215:23:-;;;;;;;;;;-1:-1:-1;2614:215:23;;;;;:::i;:::-;;:::i;2480:509:22:-;1602:13:23;:11;:13::i;:::-;2548:51:22::1;;;;;;;;;;;;;;;;;::::0;2592:6:::1;2548:11;:51::i;:::-;2609:53;;;;;;;;;;;;;;;;;::::0;2648:13:::1;;2609:11;:53::i;:::-;2672:55;;;;;;;;;;;;;;-1:-1:-1::0;;;2672:55:22::1;;::::0;2705:21:::1;2672:11;:55::i;:::-;2755:13;;2745:6;:23;;2737:56;;;::::0;-1:-1:-1;;;2737:56:22;;1863:2:24;2737:56:22::1;::::0;::::1;1845:21:24::0;1902:2;1882:18;;;1875:30;-1:-1:-1;;;1921:18:24;;;1914:50;1981:18;;2737:56:22::1;;;;;;;;;2820:6;2803:13;;:23;;;;;;;:::i;:::-;::::0;;;-1:-1:-1;;2837:12:22::1;1781:6:23::0;;2854:40:22::1;::::0;-1:-1:-1;;;;;1781:6:23;;;;2883::22;;2837:12;2854:40;2837:12;2854:40;2883:6;1781::23;2854:40:22::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2836:58;;;2912:7;2904:35;;;::::0;-1:-1:-1;;;2904:35:22;;2687:2:24;2904:35:22::1;::::0;::::1;2669:21:24::0;2726:2;2706:18;;;2699:30;-1:-1:-1;;;2745:18:24;;;2738:45;2800:18;;2904:35:22::1;2485:339:24::0;2904:35:22::1;2949:33;;;;;;;;;;;;;;-1:-1:-1::0;;;2949:33:22::1;;::::0;:11:::1;:33::i;:::-;2538:451;2480:509:::0;:::o;1490:637::-;1603:9;;1591;:21;1583:68;;;;-1:-1:-1;;;1583:68:22;;3031:2:24;1583:68:22;;;3013:21:24;3070:2;3050:18;;;3043:30;3109:34;3089:18;;;3082:62;-1:-1:-1;;;3160:18:24;;;3153:32;3202:19;;1583:68:22;2829:398:24;1583:68:22;1662:11;1694:3;1677:13;:9;1689:1;1677:13;:::i;:::-;1676:21;;;;:::i;:::-;1662:35;-1:-1:-1;1713:17:22;1733:15;1662:35;1733:9;:15;:::i;:::-;1713:35;;1759:15;1791:9;1777:23;;:11;:23;:::i;:::-;1759:41;-1:-1:-1;1828:22:22;1853:19;1863:9;1759:41;1853:19;:::i;:::-;1828:44;;1916:14;1899:13;;:31;;;;;;;:::i;:::-;;;;-1:-1:-1;;1964:42:22;;;3925:25:24;;;2000:5:22;3981:2:24;3966:18;;3959:50;1972:10:22;;1964:42;;3898:18:24;1964:42:22;;;;;;;2057:19;;-1:-1:-1;;;;;2057:11:22;;;:19;;;;;2069:6;;2057:19;;;;2069:6;2057:11;:19;;;;;;;;;;;;;;;;;;;;-1:-1:-1;2082:42:22;;2098:4;;2082:42;;;;;2114:9;;2082:42;;;;2114:9;2098:4;2082:42;;;;;;;;;;;;;;;;;;;;;1577:550;;;;1490:637;;:::o;2364:101:23:-;1602:13;:11;:13::i;:::-;2428:30:::1;2455:1;2428:18;:30::i;:::-;2364:101::o:0;924:513:22:-;834:1;818:13;;:17;810:52;;;;-1:-1:-1;;;810:52:22;;4222:2:24;810:52:22;;;4204:21:24;4261:2;4241:18;;;4234:30;-1:-1:-1;;;4280:18:24;;;4273:52;4342:18;;810:52:22;4020:346:24;810:52:22;1047:9:::1;;1034;:22;;1026:68;;;::::0;-1:-1:-1;;;1026:68:22;;4573:2:24;1026:68:22::1;::::0;::::1;4555:21:24::0;4612:2;4592:18;;;4585:30;4651:34;4631:18;;;4624:62;-1:-1:-1;;;4702:18:24;;;4695:31;4743:19;;1026:68:22::1;4371:397:24::0;1026:68:22::1;1104:15;1136:9;1122:23;::::0;:11:::1;:23;:::i;:::-;1104:41;;1202:7;1185:13;;:24;;1177:59;;;::::0;-1:-1:-1;;;1177:59:22;;4975:2:24;1177:59:22::1;::::0;::::1;4957:21:24::0;5014:2;4994:18;;;4987:30;-1:-1:-1;;;5033:18:24;;;5026:52;5095:18;;1177:59:22::1;4773:346:24::0;1177:59:22::1;1264:7;1247:13;;:24;;;;;;;:::i;:::-;::::0;;;-1:-1:-1;;1320:34:22::1;::::0;;3925:25:24;;;1349:4:22::1;3981:2:24::0;3966:18;;3959:50;1328:10:22::1;::::0;1320:34:::1;::::0;3898:18:24;1320:34:22::1;;;;;;;1364:37;::::0;1372:10:::1;::::0;1364:37;::::1;;;::::0;1393:7;;1364:37:::1;::::0;;;1393:7;1372:10;1364:37;::::1;;;;;;;;;;;;;::::0;::::1;;;;;-1:-1:-1::0;1411:19:22::1;::::0;-1:-1:-1;;;;;1411:11:22;::::1;::::0;:19;::::1;;;::::0;1423:6;;1411:19:::1;::::0;;;1423:6;1411:11;:19;::::1;;;;;;;;;;;;;::::0;::::1;;;;;;1016:421;924:513:::0;;:::o;2351:88::-;2423:9;2406:13;;:26;;;;;;;:::i;:::-;;;;-1:-1:-1;;2351:88:22:o;2196:107::-;1602:13:23;:11;:13::i;:::-;2272:9:22::1;:24:::0;2196:107::o;2614:215:23:-;1602:13;:11;:13::i;:::-;-1:-1:-1;;;;;2698:22:23;::::1;2694:91;;2743:31;::::0;-1:-1:-1;;;2743:31:23;;2771:1:::1;2743:31;::::0;::::1;949:51:24::0;922:18;;2743:31:23::1;777:229:24::0;2694:91:23::1;2794:28;2813:8;2794:18;:28::i;:::-;2614:215:::0;:::o;1867:162::-;1755:7;1781:6;-1:-1:-1;;;;;1781:6:23;735:10:0;1926:23:23;1922:101;;1972:40;;-1:-1:-1;;;1972:40:23;;735:10:0;1972:40:23;;;949:51:24;922:18;;1972:40:23;777:229:24;7139:145:11;7206:71;7269:2;7273;7222:54;;;;;;;;;:::i;:::-;;;;-1:-1:-1;;7222:54:11;;;;;;;;;;;;;;-1:-1:-1;;;;;7222:54:11;-1:-1:-1;;;7222:54:11;;;7206:15;:71::i;6191:121::-;6246:59;6301:2;6262:42;;;;;;;;:::i;:::-;;;;-1:-1:-1;;6262:42:11;;;;;;;;;;;;;;-1:-1:-1;;;;;6262:42:11;-1:-1:-1;;;6262:42:11;;;6246:15;:59::i;2983:187:23:-;3056:16;3075:6;;-1:-1:-1;;;;;3091:17:23;;;-1:-1:-1;;;;;;3091:17:23;;;;;;3123:40;;3075:6;;;;;;;3123:40;;3056:16;3123:40;3046:124;2983:187;:::o;851:129:11:-;922:51;965:7;265:22;131:42;265:40;;594:1;571;541:7;535:14;510:2;501:7;497:16;461:14;434:5;402:211;381:246;367:270;180:463;:::o;14:226:24:-;73:6;126:2;114:9;105:7;101:23;97:32;94:52;;;142:1;139;132:12;94:52;-1:-1:-1;187:23:24;;14:226;-1:-1:-1;14:226:24:o;245:139::-;-1:-1:-1;;;;;328:31:24;;318:42;;308:70;;374:1;371;364:12;389:383;465:6;473;526:2;514:9;505:7;501:23;497:32;494:52;;;542:1;539;532:12;494:52;581:9;568:23;600:39;633:5;600:39;:::i;:::-;658:5;736:2;721:18;;;;708:32;;-1:-1:-1;;;389:383:24:o;1401:255::-;1460:6;1513:2;1501:9;1492:7;1488:23;1484:32;1481:52;;;1529:1;1526;1519:12;1481:52;1568:9;1555:23;1587:39;1620:5;1587:39;:::i;:::-;1645:5;1401:255;-1:-1:-1;;;1401:255:24:o;2010:127::-;2071:10;2066:3;2062:20;2059:1;2052:31;2102:4;2099:1;2092:15;2126:4;2123:1;2116:15;2142:128;2209:9;;;2230:11;;;2227:37;;;2244:18;;:::i;:::-;2142:128;;;;:::o;3232:168::-;3305:9;;;3336;;3353:15;;;3347:22;;3333:37;3323:71;;3374:18;;:::i;3405:217::-;3445:1;3471;3461:132;;3515:10;3510:3;3506:20;3503:1;3496:31;3550:4;3547:1;3540:15;3578:4;3575:1;3568:15;3461:132;-1:-1:-1;3607:9:24;;3405:217::o;3627:125::-;3692:9;;;3713:10;;;3710:36;;;3726:18;;:::i;5124:400::-;5166:3;5204:5;5198:12;5231:6;5226:3;5219:19;5256:1;5266:139;5280:6;5277:1;5274:13;5266:139;;;5388:4;5373:13;;;5369:24;;5363:31;5343:11;;;5339:22;;5332:63;5295:12;5266:139;;;5270:3;5450:1;5443:4;5434:6;5429:3;5425:16;5421:27;5414:38;5513:4;5506:2;5502:7;5497:2;5489:6;5485:15;5481:29;5476:3;5472:39;5468:50;5461:57;;;5124:400;;;;:::o;5529:291::-;5706:2;5695:9;5688:21;5669:4;5726:45;5767:2;5756:9;5752:18;5744:6;5726:45;:::i;:::-;5718:53;;5807:6;5802:2;5791:9;5787:18;5780:34;5529:291;;;;;:::o;5825:220::-;5974:2;5963:9;5956:21;5937:4;5994:45;6035:2;6024:9;6020:18;6012:6;5994:45;:::i","linkReferences":{}},"methodIdentifiers":{"chargeExtraGasForLargeTx(address,uint256)":"2653d97d","depositLiquidity()":"ca593c59","liquidityPool()":"665a11ca","owner()":"8da5cb5b","payGasForSmallTx(address,uint256)":"972c78b5","renounceOwnership()":"715018a6","thresholdContract()":"65fcf53a","transferOwnership(address)":"f2fde38b","updateThreshold(uint256)":"d7d7442f","withdrawFunds(uint256)":"155dd5ee"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.28+commit.7893614a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_thresholdAddress\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"OwnableInvalidOwner\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"OwnableUnauthorizedAccount\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"gasUsed\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"isSmallTx\",\"type\":\"bool\"}],\"name\":\"GasPaid\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"chargeExtraGasForLargeTx\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"depositLiquidity\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"liquidityPool\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"payGasForSmallTx\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"thresholdContract\",\"outputs\":[{\"internalType\":\"contract DynamicThreshold\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"newThreshold\",\"type\":\"uint256\"}],\"name\":\"updateThreshold\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawFunds\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}],\"devdoc\":{\"errors\":{\"OwnableInvalidOwner(address)\":[{\"details\":\"The owner is not a valid owner account. (eg. `address(0)`)\"}],\"OwnableUnauthorizedAccount(address)\":[{\"details\":\"The caller account is not authorized to perform an operation.\"}]},\"kind\":\"dev\",\"methods\":{\"owner()\":{\"details\":\"Returns the address of the current owner.\"},\"renounceOwnership()\":{\"details\":\"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner.\"},\"transferOwnership(address)\":{\"details\":\"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner.\"}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/LiquidityPool.sol\":\"GasAbstraction\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":forge-std/=lib/forge-std/src/\"]},\"sources\":{\"/home/aviralsingh/Gas-Modulation-App/lib/openzeppelin-contracts/contracts/utils/Context.sol\":{\"keccak256\":\"0x493033a8d1b176a037b2cc6a04dad01a5c157722049bbecf632ca876224dd4b2\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6a708e8a5bdb1011c2c381c9a5cfd8a9a956d7d0a9dc1bd8bcdaf52f76ef2f12\",\"dweb:/ipfs/Qmax9WHBnVsZP46ZxEMNRQpLQnrdE4dK8LehML1Py8FowF\"]},\"lib/forge-std/src/console.sol\":{\"keccak256\":\"0x4bbf47eb762cef93729d6ef15e78789957147039b113e5d4df48e3d3fd16d0f5\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://af9e3a7c3d82fb5b10b57ca4d1a82f2acbef80c077f6f6ef0cc0187c7bfd9f57\",\"dweb:/ipfs/QmR9VzmnBDJpgiDP6CHT6truehukF9HpYvuP6kRiJbDwPP\"]},\"src/DynamicThreshold.sol\":{\"keccak256\":\"0xa237d7ea0cb4c5da3eaed2e3105d3b3f6cbb65b9a86f74c4c4463ac9cc3474f4\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://1fb28894cab01ff9e2d702ee5b37fbacca3faf38d5fa2fe82a61bbbad37f34d5\",\"dweb:/ipfs/QmVyqbEei95aBuwr9K11QEgeKuBHCKgGsCd3i2t6BjWMjs\"]},\"src/LiquidityPool.sol\":{\"keccak256\":\"0x75e00ea59e69bb7624cceadfe3e93d89ba860b38e727507fa23314199f40c766\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://53ef317bbfa13947c3f82a64838d2769694fd2e3304900e223d8bc37bd384e15\",\"dweb:/ipfs/QmYn4UoxtcRvnzX3vbzcS8midfBXXPvdyNGQyDFe3iHb96\"]},\"src/Ownable.sol\":{\"keccak256\":\"0x9143821a53e65237ec5dd25b6e4b90ad6e51d3b91ec91b1a6000a35f21343c8c\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://82648376b2fca47e9533af800330d4101e1a05f0b21473a5993c19e8c30b6121\",\"dweb:/ipfs/QmQBwxFk2xF9yhbxKbpwqH4Lb97uqRkT3JD3aFzew6mKzq\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.28+commit.7893614a"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"_thresholdAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"type":"error","name":"OwnableInvalidOwner"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"type":"error","name":"OwnableUnauthorizedAccount"},{"inputs":[{"internalType":"address","name":"user","type":"address","indexed":true},{"internalType":"uint256","name":"gasUsed","type":"uint256","indexed":false},{"internalType":"bool","name":"isSmallTx","type":"bool","indexed":false}],"type":"event","name":"GasPaid","anonymous":false},{"inputs":[{"internalType":"address","name":"previousOwner","type":"address","indexed":true},{"internalType":"address","name":"newOwner","type":"address","indexed":true}],"type":"event","name":"OwnershipTransferred","anonymous":false},{"inputs":[{"internalType":"address payable","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"payable","type":"function","name":"chargeExtraGasForLargeTx"},{"inputs":[],"stateMutability":"payable","type":"function","name":"depositLiquidity"},{"inputs":[],"stateMutability":"view","type":"function","name":"liquidityPool","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"address payable","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"payable","type":"function","name":"payGasForSmallTx"},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"renounceOwnership"},{"inputs":[],"stateMutability":"view","type":"function","name":"thresholdContract","outputs":[{"internalType":"contract DynamicThreshold","name":"","type":"address"}]},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"transferOwnership"},{"inputs":[{"internalType":"uint256","name":"newThreshold","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"updateThreshold"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"withdrawFunds"},{"inputs":[],"stateMutability":"payable","type":"receive"}],"devdoc":{"kind":"dev","methods":{"owner()":{"details":"Returns the address of the current owner."},"renounceOwnership()":{"details":"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner."},"transferOwnership(address)":{"details":"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner."}},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/LiquidityPool.sol":"GasAbstraction"},"evmVersion":"paris","libraries":{}},"sources":{"/home/aviralsingh/Gas-Modulation-App/lib/openzeppelin-contracts/contracts/utils/Context.sol":{"keccak256":"0x493033a8d1b176a037b2cc6a04dad01a5c157722049bbecf632ca876224dd4b2","urls":["bzz-raw://6a708e8a5bdb1011c2c381c9a5cfd8a9a956d7d0a9dc1bd8bcdaf52f76ef2f12","dweb:/ipfs/Qmax9WHBnVsZP46ZxEMNRQpLQnrdE4dK8LehML1Py8FowF"],"license":"MIT"},"lib/forge-std/src/console.sol":{"keccak256":"0x4bbf47eb762cef93729d6ef15e78789957147039b113e5d4df48e3d3fd16d0f5","urls":["bzz-raw://af9e3a7c3d82fb5b10b57ca4d1a82f2acbef80c077f6f6ef0cc0187c7bfd9f57","dweb:/ipfs/QmR9VzmnBDJpgiDP6CHT6truehukF9HpYvuP6kRiJbDwPP"],"license":"MIT"},"src/DynamicThreshold.sol":{"keccak256":"0xa237d7ea0cb4c5da3eaed2e3105d3b3f6cbb65b9a86f74c4c4463ac9cc3474f4","urls":["bzz-raw://1fb28894cab01ff9e2d702ee5b37fbacca3faf38d5fa2fe82a61bbbad37f34d5","dweb:/ipfs/QmVyqbEei95aBuwr9K11QEgeKuBHCKgGsCd3i2t6BjWMjs"],"license":"MIT"},"src/LiquidityPool.sol":{"keccak256":"0x75e00ea59e69bb7624cceadfe3e93d89ba860b38e727507fa23314199f40c766","urls":["bzz-raw://53ef317bbfa13947c3f82a64838d2769694fd2e3304900e223d8bc37bd384e15","dweb:/ipfs/QmYn4UoxtcRvnzX3vbzcS8midfBXXPvdyNGQyDFe3iHb96"],"license":"MIT"},"src/Ownable.sol":{"keccak256":"0x9143821a53e65237ec5dd25b6e4b90ad6e51d3b91ec91b1a6000a35f21343c8c","urls":["bzz-raw://82648376b2fca47e9533af800330d4101e1a05f0b21473a5993c19e8c30b6121","dweb:/ipfs/QmQBwxFk2xF9yhbxKbpwqH4Lb97uqRkT3JD3aFzew6mKzq"],"license":"MIT"}},"version":1},"id":22}
];

const TransactionForm = () => {
  const [amount, setAmount] = useState("");
  const [toAddress, setToAddress] = useState("");
  const { signer } = useContext(WalletContext);

  const handleSubmit = async (e) => {
    e.preventDefault();
    const contract = new ethers.Contract(contractAddress, abi, signer);
    const txValue = ethers.utils.parseEther(amount);
    const transaction = await contract.transact(toAddress, txValue, { value: txValue });
    await transaction.wait();
    alert("Transaction Completed");
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        type="text"
        value={toAddress}
        onChange={(e) => setToAddress(e.target.value)}
        placeholder="To Address"
      />
      <input
        type="text"
        value={amount}
        onChange={(e) => setAmount(e.target.value)}
        placeholder="Amount (ETH)"
      />
      <button type="submit">Transact</button>
    </form>
  );
};

export default TransactionForm;